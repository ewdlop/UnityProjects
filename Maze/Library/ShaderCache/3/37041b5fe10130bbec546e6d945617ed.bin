//
// This test excercises a few new optimizations that were entered in the context
// of Binary operators and EmitBranchable.
//
// There are a number of cases:
//
//   EmitBranchable can be called with an `onTrue' (false for if, true for loops).
//
//   The == and != operators handle the Null compares specially
using System;

class X {
	static int one = 1;
	static int two = 2;
	static int three = 3;
	static int four = 4;
	static bool t = true;
	static bool f = false;

	static int fcalls = 0;
	static int tcalls = 0;
	
	static bool ff ()
	{
		fcalls++;
		return false;
	}

	static bool tt ()
	{
		tcalls++;
		return true;
	}
	
	static int test_if ()
	{
		//
		// Ands in the if context
		//
		if (f && f)
			return 1;
		if (t && f)
			return 2;
		if (f && t)
			return 3;
		
		if (one < two && f)
			return 4;
		if (one > two && t)
			return 5;
		if (one < two && t)
			Console.WriteLine ("");

		if (ff () && ff ())
			return 6;
		if (fcalls != 1)
			return 10;
		
		if (tt () && tt ()){
			if (tcalls != 2)
				return 11;
			
			if (tt () && ff ())
				return 8;
			if (tcalls != 3)
				return 12;
			if (fcalls != 2)
				return 13;
			if (ff () && tt ())
				return 9;
			if (fcalls != 3)
				return 14;
			if (tcalls != 3)
				return 15;
		} else
			return 7;

		if (one < two && four > three){
			if (one == one && two != three){
				
			} else 
				return 20;
		} else
			return 21;

		if (one == two || two != two)
			return 22;

		object o = null;

		if (o == null || false){
			o = 1;

			if (o != null || false)
				o = null;
			else
				return 23;

			if 