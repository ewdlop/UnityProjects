fileFormatVersion: 2
guid: b06d68dfffbdf804db402613b981dfcc
TextureImporter:
  internalIDToNameTable:
  - first:
      213: 21300000
    second: props_0 24_0_0
  - first:
      213: 21300002
    second: props_0 24_0_1
  - first:
      213: 21300004
    second: props_0 24_0_2
  - first:
      213: 21300006
    second: props_0 24_0_3
  - first:
      213: 21300008
    second: props_0 24_0_4
  - first:
      213: 21300010
    second: props_0 24_0_7
  - first:
      213: 21300012
    second: props_0 24_0_8
  - first:
      213: 21300014
    second: props_0 24_0_9
  - first:
      213: 21300016
    second: props_0 24_0_10
  - first:
      213: 21300018
    second: props_0 24_0_11
  - first:
      213: 21300020
    second: props_0 24_0_12
  - first:
      213: 21300022
    second: props_0 24_0_13
  - first:
      213: 21300024
    second: props_0 24_0_14
  - first:
      213: 21300026
    second: props_0 24_0_15
  - first:
      213: 21300028
    second: props_0 24_0_16
  - first:
      213: 21300030
    second: props_0 24_0_17
  - first:
      213: 21300032
    second: props_0 24_0_18
  - first:
      213: 21300034
    second: props_0 24_0_19
  - first:
      213: 21300036
    second: props_0 24_0_20
  - first:
      213: 21300038
    second: props_0 24_0_21
  - first:
      213: 21300040
    second: props_0 24_0_22
  - first:
      213: 21300042
    second: props_0 24_0_23
  - first:
      213: 21300044
    second: props_0 24_0_24
  - first:
      213: 21300046
    second: props_0 24_0_25
  - first:
      213: 21300048
    second: props_0 24_0_26
  - first:
      213: 21300050
    second: props_0 24_0_27
  - first:
      213: 21300052
    second: props_0 24_0_28
  - first:
      213: 21300054
    second: props_0 24_0_29
  - first:
      213: 21300056
    second: props_0 24_0_30
  - first:
      213: 21300058
    second: props_0 24_0_31
  - first:
      213: 21300060
    second: props_0 24_0_32
  - first:
      213: 21300062
    second: props_0 24_0_33
  - first:
      213: 21300064
    second: props_0 24_0_34
  - first:
      213: 21300066
    second: props_0 24_0_35
  - first:
      213: 21300068
    second: props_0 24_0_36
  - first:
      213: 21300070
    second: props_0 24_0_37
  externalObjects: {}
  serializedVersion: 11
  mipmaps:
    mipMapMode: 0
    enableMipMap: 0
    sRGBTexture: 1
    linearTexture: 0
    fadeOut: 0
    borderMipMap: 0
    mipMapsPreserveCoverage: 0
    alphaTestReferenceValue: 0.5
    mipMapFadeDistanceStart: 1
    mipMapFadeDistanceEnd: 3
  bumpmap:
    convertToNormalMap: 0
    externalNormalMap: 0
    heightScale: 0.25
    normalMapFilter: 0
  isReadable: 0
  streamingMipmaps: 0
  streamingMipmapsPriority: 0
  vTOnly: 0
  grayScaleToAlpha: 0
  generateCubemap: 6
  cubemapConvolution: 0
  seamlessCubemap: 0
  textureFormat: 1
  maxTextureSize: 2048
  textureSettings:
    serializedVersion: 2
    filterMode: -1
    aniso: -1
    mipBias: -100
    wrapU: 1
    wrapV: 1
    wrapW: 1
  nPOTScale: 0
  lightmap: 0
  compressionQuality: 50
  spriteMode: 2
  spriteExtrude: 1
  spriteMeshType: 1
  alignment: 0
  spritePivot: {x: 0.5, y: 0.5}
  spritePixelsToUnits: 100
  spriteBorder: {x: 0, y: 0, z: 0, w: 0}
  spriteGenerateFallbackPhysicsShape: 1
  alphaUsage: 1
  alphaIsTransparency: 0
  spriteTessellationDetail: -1
  textureType: 8
  textureShape: 1
  singleChannelComponent: 0
  flipbookRows: 1
  flipbookColumns: 1
  maxTextureSizeSet: 0
  compressionQualitySet: 0
  textureFormatSet: 0
  ignorePngGamma: 0
  applyGammaDecoding: 1
  platformSettings:
  - serializedVersion: 3
    buildTarget: DefaultTexturePlatform
    maxTextureSize: 2048
    resizeAlgorithm: 0
    textureFormat: -1
    textureCompression: 1
    compressionQuality: 50
    crunchedCompression: 0
    allowsAlphaSplitting: 0
    overridden: 0
    androidETC2FallbackOverride: 0
    forceMaximumCompressionQuality_BC6H_BC7: 1
  - serializedVersion: 3
    buildTarget: Standalone
    maxTextureSize: 2048
    resizeAlgorithm: 0
    textureFormat: -1
    textureCompression: 1
    compressionQuality: 50
    crunchedCompression: 0
    allowsAlphaSplitting: 0
    overridden: 0
    androidETC2FallbackOverride: 0
    forceMaximumCompressionQuality_BC6H_BC7: 1
  - serializedVersion: 3
    buildTarget: Android
    maxTextureSize: 2048
    resizeAlgorithm: 0
    textureFormat: -1
    textureCompression: 1
    compressionQuality: 50
    crunchedCompression: 0
    allowsAlphaSplitting: 0
    overridden: 0
    androidETC2FallbackOverride: 0
    forceMaximumCompressionQuality_BC6H_BC7: 1
  spriteSheet:
    serializedVersion: 2
    sprites:
    - serializedVersion: 2
      name: props_0 24_0_0
      rect:
        serializedVersion: 2
        x: 5
        y: 123
        width: 7
        height: 21
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 02305410000000000800000000000000
      internalID: 21300000
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_1
      rect:
        serializedVersion: 2
        x: 14
        y: 119
        width: 7
        height: 21
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 22305410000000000800000000000000
      internalID: 21300002
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_2
      rect:
        serializedVersion: 2
        x: 32
        y: 123
        width: 9
        height: 14
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 42305410000000000800000000000000
      internalID: 21300004
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_3
      rect:
        serializedVersion: 2
        x: 55
        y: 122
        width: 13
        height: 15
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 62305410000000000800000000000000
      internalID: 21300006
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_4
      rect:
        serializedVersion: 2
        x: 75
        y: 120
        width: 17
        height: 24
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 82305410000000000800000000000000
      internalID: 21300008
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_7
      rect:
        serializedVersion: 2
        x: 0
        y: 99
        width: 25
        height: 17
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: a2305410000000000800000000000000
      internalID: 21300010
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_8
      rect:
        serializedVersion: 2
        x: 27
        y: 100
        width: 21
        height: 16
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: c2305410000000000800000000000000
      internalID: 21300012
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_9
      rect:
        serializedVersion: 2
        x: 54
        y: 99
        width: 13
        height: 16
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: e2305410000000000800000000000000
      internalID: 21300014
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_10
      rect:
        serializedVersion: 2
        x: 81
        y: 96
        width: 7
        height: 23
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 03305410000000000800000000000000
      internalID: 21300016
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_11
      rect:
        serializedVersion: 2
        x: 102
        y: 99
        width: 14
        height: 17
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 23305410000000000800000000000000
      internalID: 21300018
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_12
      rect:
        serializedVersion: 2
        x: 124
        y: 98
        width: 19
        height: 21
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 43305410000000000800000000000000
      internalID: 21300020
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_13
      rect:
        serializedVersion: 2
        x: 2
        y: 77
        width: 20
        height: 15
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 63305410000000000800000000000000
      internalID: 21300022
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_14
      rect:
        serializedVersion: 2
        x: 26
        y: 77
        width: 7
        height: 15
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 83305410000000000800000000000000
      internalID: 21300024
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_15
      rect:
        serializedVersion: 2
        x: 37
        y: 76
        width: 11
        height: 16
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: a3305410000000000800000000000000
      internalID: 21300026
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_16
      rect:
        serializedVersion: 2
        x: 48
        y: 74
        width: 22
        height: 11
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: c3305410000000000800000000000000
      internalID: 21300028
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_17
      rect:
        serializedVersion: 2
        x: 72
        y: 75
        width: 18
        height: 11
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: e3305410000000000800000000000000
      internalID: 21300030
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_18
      rect:
        serializedVersion: 2
        x: 97
        y: 75
        width: 22
        height: 14
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 04305410000000000800000000000000
      internalID: 21300032
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_19
      rect:
        serializedVersion: 2
        x: 123
        y: 75
        width: 17
        height: 17
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 24305410000000000800000000000000
      internalID: 21300034
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_20
      rect:
        serializedVersion: 2
        x: 7
        y: 51
        width: 14
        height: 12
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 44305410000000000800000000000000
      internalID: 21300036
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_21
      rect:
        serializedVersion: 2
        x: 27
        y: 49
        width: 20
        height: 16
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 64305410000000000800000000000000
      internalID: 21300038
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_22
      rect:
        serializedVersion: 2
        x: 48
        y: 51
        width: 24
        height: 15
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 84305410000000000800000000000000
      internalID: 21300040
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_23
      rect:
        serializedVersion: 2
        x: 73
        y: 53
        width: 23
        height: 13
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: a4305410000000000800000000000000
      internalID: 21300042
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_24
      rect:
        serializedVersion: 2
        x: 100
        y: 53
        width: 18
        height: 12
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: c4305410000000000800000000000000
      internalID: 21300044
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_25
      rect:
        serializedVersion: 2
        x: 124
        y: 49
        width: 16
        height: 19
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: e4305410000000000800000000000000
      internalID: 21300046
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_26
      rect:
        serializedVersion: 2
        x: 7
        y: 31
        width: 16
        height: 12
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 05305410000000000800000000000000
      internalID: 21300048
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_27
      rect:
        serializedVersion: 2
        x: 28
        y: 31
        width: 20
        height: 12
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 25305410000000000800000000000000
      internalID: 21300050
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_28
      rect:
        serializedVersion: 2
        x: 53
        y: 32
        width: 16
        height: 12
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 45305410000000000800000000000000
      internalID: 21300052
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_29
      rect:
        serializedVersion: 2
        x: 78
        y: 26
        width: 15
        height: 18
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 65305410000000000800000000000000
      internalID: 21300054
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_30
      rect:
        serializedVersion: 2
        x: 107
        y: 31
        width: 8
        height: 9
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 85305410000000000800000000000000
      internalID: 21300056
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_31
      rect:
        serializedVersion: 2
        x: 124
        y: 29
        width: 16
        height: 14
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: a5305410000000000800000000000000
      internalID: 21300058
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_32
      rect:
        serializedVersion: 2
        x: 0
        y: 1
        width: 24
        height: 22
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: c5305410000000000800000000000000
      internalID: 21300060
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_33
      rect:
        serializedVersion: 2
        x: 29
        y: 0
        width: 18
        height: 24
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: e5305410000000000800000000000000
      internalID: 21300062
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_34
      rect:
        serializedVersion: 2
        x: 53
        y: 6
        width: 16
        height: 18
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 06305410000000000800000000000000
      internalID: 21300064
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_35
      rect:
        serializedVersion: 2
        x: 74
        y: 0
        width: 19
        height: 24
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 26305410000000000800000000000000
      internalID: 21300066
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_36
      rect:
        serializedVersion: 2
        x: 96
        y: 0
        width: 24
        height: 23
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 46305410000000000800000000000000
      internalID: 21300068
      vertices: []
      indices: 
      edges: []
      weights: []
    - serializedVersion: 2
      name: props_0 24_0_37
      rect:
        serializedVersion: 2
        x: 124
        y: 2
        width: 19
        height: 16
      alignment: 0
      pivot: {x: 0, y: 0}
      border: {x: 0, y: 0, z: 0, w: 0}
      outline: []
      physicsShape: []
      tessellationDetail: 0
      bones: []
      spriteID: 66305410000000000800000000000000
      internalID: 21300070
      vertices: []
      indices: 
      edges: []
      weights: []
    outline: []
    physicsShape: []
    bones: []
    spriteID: 
    internalID: 0
    vertices: []
    indices: 
    edges: []
    weights: []
    secondaryTextures: []
  spritePackingTag: 
  pSDRemoveMatte: 0
  pSDShowRemoveMatteOption: 0
  userData: 
  assetBundleName: 
  assetBundleVariant: 
                                       *************************************************************\

Struct:
    iu_i915_perf_config_register

Description:
    For adding configs to kernel. Based on i915_oa_reg defined in kernel in i915_drv.h.
    DRM_IOCTL_I915_PERF_ADD_CONFIG expects just (address, value) tuples.

\*****************************************************************************/
struct iu_i915_perf_config_register
{
    uint32_t address;
    uint32_t value;
};

/*****************************************************************************\

Struct:
    iu_i915_perf_record

Description:
    For reading reports from kernel. Content of 'data' depends on flags passed to
    DRM_IOCTL_I915_PERF_OPEN, it may contain multiple different information at once,
    e.g. PID, CTX, timestamp, OA report.

\*****************************************************************************/
struct iu_i915_perf_record
{
   struct drm_i915_perf_record_header header;
   uint8_t                            data[];
};

#if defined(__cplusplus)
} // extern "C"
#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  _ß5FŞõ—ŠTúÍ]†á™BíHCG—Æoƒ«¤»ôí#ÀÛÏ³\Šï¢£@_Âk«äÖìVx¨?ıG¦…MÑ$ÈBjj œ-p| ÅÖ†òÑëïÌ|úµ“£ü¯Ì9oûäŸtÈzêt\ƒ]›Ê #yıÄy# &>Wş/òa;ø“§\¯™öYë=¤(—Iš6ÆyY´ˆ)jayªW–è=ûbÚŠ,j¦h»í;^4á8ü˜DDk÷Ù:S6=ÿ‘«J§N©3“—©Ÿ®\?ãWì(Ü“¢Ò99r¸Aj,öc)õÉêœYT`0ğÀ&
y™ë†—D½h,ˆp'Û€I2!‡#ãÅÓÿ Ûf=„´–èİ!aKÍ°L³hÂ¨Ö(H”Ã®!~
e‡7ÕL`Wºq)ĞÔ¨_h¦_ú+b9o¢İ"tõß&eºØ«'g÷HN”È0”kxœ+Æµ“¯}«Gô‹ŞÿæÁöËYG–[rŒÊû>4S§}w+•k[ß0‰×Ãı2Á½0Ø2
.9­qêßO§ò!Ÿ¸Ê‰õ_„Y~Ó°#F¸ÀÂßÖÎÂkV@uĞ]TÆxÄ¯oƒù}‚)*4È˜%[1í’¬lRcÊŸæ¨íOm<©X¢ÇÑà¼°ä@¬é<z’å÷†l‡¥Ì ›¢vP‰0ıV~ĞE÷8:„„-ï;éâpÒ+ÿÒäĞ6¾”+@Ö§×›.(’Ç¶ì¶*í,¨‚\-0l,±8¸œÕóhòó”á22˜"B…Jãyàœ"ìï¤½QHŸ?áîEÉÀf†J°Åa=ù“§Å¼†Å@g±´†=ŠŞÁ[Úu°ÙÔv»³ÎMivy(è›²}³WˆcÎK—h¨>¬’3x„-‰×ì"Şöê—ÌIádC®Ä<JEé“¶$CBHµ"wšád3 Ok~ŒóÎN[h±»•W"bSCíÜE­n%1=¤Æû„Š˜ö€ÜàG’ ¿L•º¼iÃM•İ^ÑÊš«% õ!ñª+ËX­ä©•OúßN‘Äòsˆ¸?‡ÍÅoôSUÇsFÁ+a^VŸ–”lk$ùÿé­ûáÔZª2íñ¾ìVxß˜¤ûj)ã. 5~^ß/ˆ•B*Í…ÏgHµ‘_ßWµ†ğÌuÈM-b~EĞy RŞ£AXµî>Æ+Ç¬ñ£Æ·P|HJùW¼D1“[4D§ÜŸMµh$X¤¼PL«òó¹úíá×!•Âw`¹AEëF„VĞ`H¸ôóˆşÑL–_B^7–:5Áˆ‚rlš5svBT(İÊ//
// socket-related test cases
//
// Authors:
//  Steffen Kiess (s-kiess@web.de)
//
// Copyright (C) 2015 Steffen Kiess
//

using System;
using System.IO;
using System.Net;
using System.Net.Sockets;
using System.Runtime.InteropServices;

using Mono.Unix;
using Mono.Unix.Native;

using NUnit.Framework;

namespace MonoTests.Mono.Unix.Native
{
	[TestFixture, Category ("NotDotNet"), Category ("NotOnWindows")]
	public class SocketTest {

		string TempFolder;

		[SetUp]
		public void SetUp ()
		{
			TempFolder = Path.Combine (Path.GetTempPath (), this.GetType ().FullName);

			if (Directory.Exists (TempFolder))
				Directory.Delete (TempFolder, true);

			Directory.CreateDirectory (TempFolder);
		}

		[TearDown]
		public void TearDown()
		{
			if (Directory.Exists (TempFolder))
				Directory.Delete (TempFolder, true);
		}

		// Set a timeout on all sockets to make sure that if a test fails it
		// won't cause the program to hang
		void SetTimeout (int socket)
		{
			var timeout = new Timeval {
				tv_sec = 0,
				tv_usec = 500000,
			};
			if (Syscall.setsockopt (socket, UnixSocketProtocol.SOL_SOCKET, UnixSocketOptionName.SO_RCVTIMEO, timeout) < 0 ||
					Syscall.setsockopt (socket, UnixSocketProtocol.SOL_SOCKET, UnixSocketOptionName.SO_SNDTIMEO, timeout) < 0)
				UnixMarshal.ThrowExceptionForLastError ();
		}

		void WithSocketPair (Action<int, int> f)
		{
			int socket1, socket2;
			if (Syscall.socketpair (UnixAddressFamily.AF_UNIX, UnixSocketType.SOCK_STREAM, 0, out socket1, out socket2) < 0)
				UnixMarshal.ThrowExceptionForLastError ();
			try {
				SetTimeout (socket1);
				SetTimeout (socket2);

				f (socket1, socket2);
			} finally {
				int r0 = Syscall.close (socket1);
				int r1 = Syscall.close (socket2);
				if (r0 < 0 || r1 < 0)
					UnixMarshal.ThrowExceptionForLastError ();
			}
		}

		void WithSockets (UnixAddressFamily af, UnixSocketType type, UnixSocketProtocol protocol, Action<int, int> f)
		{
			int so1, so2;
			if ((so1 = Syscall.socket (af, type, protocol)) < 0)
				UnixMarshal.ThrowExceptionForLastError ();
			try {
				if ((so2 = Syscall.socket (af, type, protocol)) < 0)
					UnixMarshal.ThrowExceptionForLastError ();
				try {
					SetTimeout (so1);
					SetTimeout (so2);

					f (so1, so2);
				} finally {
					if (Syscall.close (so2) < 0)
						UnixMarshal.ThrowExceptionForLastError ();
				}
			} finally {
				if (Syscall.close (so1) < 0)
					UnixMarshal.ThrowExceptionForLastError ();
			}
		}

		[Test]
		public void TestSocket ()
		{
			int socket;
			if ((socket = Syscall.socket (UnixAddressFamily.AF_UNIX, UnixSocketType.SOCK_STREAM, 0)) < 0)
				UnixMarshal.ThrowExceptionForLastError ();

			if (Syscall.close (socket) < 0)
				UnixMarshal.ThrowExceptionForLastError ();
		}

		[Test]
		public void SocketPair ()
		{
			int socket1, socket2;
			if (Syscall.socketpair (UnixAddressFamily.AF_UNIX, UnixSocketType.SOCK_STREAM, 0, out socket1, out socket2) < 0)
				UnixMarshal.ThrowExceptionForLastError ();

			int r0 = Syscall.close (socket1);
			int r1 = Syscall.close (socket2);
			if (r0 < 0 || r1 < 0)
				UnixMarshal.ThrowExceptionForLastError ();
		}

		[Test]
		public void SendRecv ()
		{
			WithSocketPair ((so1, so2) => {
				long ret;
				var buffer1 = new byte[] { 42, 43, 44 };
				ret = Syscall.send (so1, buffer1, (ulong) buffer1.Length, 0);
				if (ret < 0)
					UnixMarshal.ThrowExceptionForLastError ();

				var buffer2 = new byte[1024];
				ret = Syscall.recv (so2, buffer2, (ulong) buffer2.Length, 0);
				if (ret < 0)
					UnixMarshal.ThrowExceptionForLastError ();

				Assert.AreEqual (buffer1.Length, ret);
				for (int i = 0; i < buffer1.Length; i++)
					Assert.AreEqual (buffer1[i], buffer2[i]);
			});
		}

		[Test]
		public void SockOpt ()
		{
			WithSockets (UnixAddressFamily.AF_UNIX, UnixSocketType.SOCK_STREAM, 0, (so1, so2) => {
				int value;
				if (Syscall.getsockopt (so1, UnixSocketProtocol.SOL_SOCKET, UnixSocketOptionName.SO_REUSEADDR, out value) < 0)
					UnixMarshal.ThrowExceptionForLastError ();
				Assert.AreEqual (0, value);

				// Set SO_REUSEADDR to 1
				if (Syscall.setsockopt (so1, UnixSocketProtocol.SOL_SOCKET, UnixSocketOptionName.SO_REUSEADDR, 1) < 0)
					UnixMarshal.ThrowExceptionForLastError ();

				// Get and check SO_REUSEADDR
				if (Syscall.getsockopt (so1, UnixSocketProtocol.SOL_SOCKET, UnixSocketOptionName.SO_REUSEADDR, out value) < 0)
					UnixMarshal.ThrowExceptionForLastError ();
				Assert.AreNotEqual (0, value);

				// Set SO_REUSEADDR to 0
				if (Syscall.setsockopt (so1, UnixSocketProtocol.SOL_SOCKET, UnixSocketOptionName.SO_REUSEADDR, new byte[10], 4) < 0)
					UnixMarshal.ThrowExceptionForLastError ();

				// Get and check SO_REUSEADDR
				var buffer = new byte[15];
				long size = 12;
				if (Syscall.getsockopt (so1, UnixSocketProtocol.SOL_SOCKET, UnixSocketOptionName.SO_REUSEADDR, buffer, ref size) < 0)
					UnixMarshal.ThrowExceptionForLastError ();
				Assert.AreEqual (size, 4);
				for (int i = 0; i < size; i++)
					Assert.AreEqual (buffer[i], 0);
			});
		}

		[Test]
#if MONODROID
		[ExpectedException (typeof (ArgumentOutOfRangeException))] // IPPROTO_TCP not supported
#endif
		public void SockOptLinger ()
		{
			WithSockets (UnixAddressFamily.AF_INET, UnixSocketType.SOCK_STREAM, UnixSocketProtocol.IPPROTO_TCP, (so1, so2) => {
				Linger linger = new Linger {
					l_onoff = 1,
					l_linger = 42,
				};
				// Set SO_LINGER
				if (Syscall.setsockopt (so1, UnixSocketProtocol.SOL_SOCKET, UnixSocketOptionName.SO_LINGER, linger) < 0)
					UnixMarshal.ThrowExceptionForLastError ();

				// Get and check SO_LINGER
				Linger value;
				if (Syscall.getsockopt (so1, UnixSocketProtocol.SOL_SOCKET, UnixSocketOptionName.SO_LINGER, out value) < 0)
					UnixMarshal.ThrowExceptionForLastError ();
				if (value.l_onoff == 0)
					Assert.Fail ("Linger not enabled");
				Assert.AreEqual (linger.l_linger, value.l_linger);
			});
		}

		[Test]
		public void Shutdown ()
		{
			WithSocketPair ((so1, so2) => {
				if (Syscall.shutdown (so1, ShutdownOption.SHUT_WR) < 0)
					UnixMarshal.ThrowExceptionForLastError ();

				var buffer2 = new byte[1024];
				long ret = Syscall.recv (so2, buffer2, (ulong) buffer2.Length, 0);
				if (ret < 0)
					UnixMarshal.ThrowExceptionForLastError ();

				Assert.AreEqual (ret, 0);
			});
		}

		[Test]
		public unsafe void ByteOrder ()
		{
			ushort val1 = Syscall.htons (0x1234);
			byte* ptr1 = (byte*) &val1;
			Assert.AreEqual (ptr1[0], 0x12);
			Assert.AreEqual (ptr1[1], 0x34);

			uint val2 = Syscall.htonl (0x6789abcd);
			byte* ptr2 = (byte*) &val2;
			Assert.AreEqual (ptr2[0], 0x67);
			Assert.AreEqual (ptr2[1], 0x89);
			Assert.AreEqual (ptr2[2], 0xab);
			Assert.AreEqual (ptr2[3], 0xcd);

			ptr1[0] = 0xfe;
			ptr1[1] = 0xdc;
			Assert.AreEqual (Syscall.ntohs (val1), 0xfedc);

			ptr2[0] = 0x76;
			ptr2[1] = 0x54;
			ptr2[2] = 0x32;
			ptr2[3] = 0x10;
			Assert.AreEqual (Syscall.ntohl (val2), 0x76543210);
		}

		[Test]
		public void InAddr ()
		{
			var ip = IPAddress.Loopback;
			var inAddr = NativeConvert.ToInAddr (ip);
			Assert.AreEqual (ip, NativeConvert.ToIPAddress (inAddr));
			Assert.AreEqual (0x7f000001, Syscall.ntohl (inAddr.s_addr));

			Assert.AreEqual ("127.0.0.1", inAddr.ToString ());
		}

		[Test]
		public void In6Addr ()
		{
			if (!Socket.OSSupportsIPv6)
				Assert.Ignore ("OS does not support IPv6.");

			var ip6 = IPAddress.IPv6Loopback;
			var in6Addr = NativeConvert.ToIn6Addr (ip6);
			Assert.AreEqual (ip6, NativeConvert.ToIPAddress (in6Addr));
			Assert.AreEqual (1, in6Addr[15]);

			Assert.AreEqual ("::1", in6Addr.ToString ());
		}

		[Test]
		public void SockaddrUnTest ()
		{
			var address1 = new SockaddrUn ("/tmp/foo");
			Assert.AreEqual (address1.Path, "/tmp/foo");
			Assert.IsFalse (address1.IsLinuxAbstractNamespace);

			var storage = address1.ToSockaddrStorage ();
			var address2 = SockaddrUn.FromSockaddrStorage (storage);
			Assert.AreEqual (address1, address2);

			var sockaddr = Sockaddr.FromSockaddrStorage (storage);
			Assert.AreEqual (sockaddr.sa_family, address1.sa_family);

			var address3 = new SockaddrUn ("/tmp/bar", linuxAbstractNamespace:true);
			Assert.AreEqual (address3.Path, "/tmp/bar");
			Assert.IsTrue (address3.IsLinuxAbstractNamespace);

			var address4 = new SockaddrUn (new string ('X', 9000));
			Assert.AreEqual (address4.Path, new string ('X', 9000));
			Assert.IsFalse (address4.IsLinuxAbstractNamespace);
			var storage2 = address4.ToSockaddrStorage ();
			var address5 = SockaddrUn.FromSockaddrStorage (storage2);
			Assert.AreEqual (address4, address5);
			// Test the malloc() path for long SockaddrUn adresses (the syscalls will fail because the fd is invalid and because the path is too long)
			Syscall.bind (-1, address4);
			Syscall.getsockname (-1, address4);

			Assert.AreEqual ("{sa_family=AF_UNIX, sun_path=\"/tmp/foo\"}", address1.ToString ());
			Assert.AreEqual ("{sa_family=AF_UNIX, sun_path=\"\\0/tmp/bar\"}", address3.ToString ());
		}

		[Test]
		public void SockaddrInTest ()
		{
			var address1 = new SockaddrIn {
				sin_family = UnixAddressFamily.AF_INET,
				sin_port = Syscall.htons (5678),
				sin_addr = NativeConvert.ToInAddr (IPAddress.Loopback),
			};

			var storage = address1.ToSockaddrStorage ();
			var address2 = SockaddrIn.FromSockaddrStorage (storage);
			Assert.AreEqual (address1, address2);

			var sockaddr = Sockaddr.FromSockaddrStorage (storage);
			Assert.AreEqual (sockaddr.sa_family, address1.sa_family);

			var storage2 = s